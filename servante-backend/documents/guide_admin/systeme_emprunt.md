# Syst√®me d'Emprunt - R√®gles et Gestion

## ‚è±Ô∏è Dur√©es d'Emprunt

### Dur√©es Standards par Cat√©gorie

#### Outils de Mesure √âlectrique
**Dur√©e : 7 jours**
- Pince amp√®rem√©trique
- Multim√®tre

**Justification :**
- Utilisation g√©n√©ralement pour des projets courts
- Forte demande
- N√©cessite rotation rapide

#### Outils de Mesure M√©canique - Standard
**Dur√©e : 7 jours**
- Rapporteur d'angle
- Jauge d'√©paisseur
- Jauge de profondeur

**Justification :**
- Outils de mesure n√©cessaires pour des phases sp√©cifiques de projet
- √âquilibre entre besoin utilisateur et disponibilit√©

#### Outils de Mesure M√©canique - Pr√©cision
**Dur√©e : 5 jours**
- Rapporteur d'angle num√©rique
- Inclinom√®tre num√©rique

**Justification :**
- Outils de haute pr√©cision
- Valeur √©lev√©e
- Demande importante
- N√©cessite √©talonnage r√©gulier

#### Outils de Mesure G√©n√©rale
**Dur√©e : 14 jours**
- Compas
- √âquerre
- M√®tre ruban

**Justification :**
- Utilisation fr√©quente sur toute la dur√©e d'un projet
- Disponibilit√© en quantit√© suffisante
- Faible risque de d√©gradation

#### Outils d'√âlectronique
**Dur√©e : 14 jours**
- Jeu de tournevis d'√©lectronique
- Pince √† d√©nuder et √† sertir automatique

**Justification :**
- N√©cessaire pour des projets complets
- Utilisation r√©guli√®re pendant la dur√©e du projet
- Bonne rotation malgr√© dur√©e longue

#### Outils G√©n√©raux
**Dur√©e : 14 jours**
- Ciseaux blancs
- Mini brosse

**Justification :**
- Usage courant
- Faible valeur
- Grande disponibilit√©

---

## üìÖ Syst√®me de Prolongation

### R√®gles G√©n√©rales

**Conditions d'√©ligibilit√© :**
- ‚úÖ Aucune r√©servation en attente sur l'outil
- ‚úÖ Pas de retard en cours sur d'autres outils
- ‚úÖ Maximum 2 prolongations par emprunt
- ‚úÖ La demande doit √™tre faite AVANT la date de retour
- ‚úÖ L'utilisateur ne doit pas avoir d'avertissements actifs

**Dur√©e de prolongation :**
- **Outils standard (7-14 jours)** : +3 jours par prolongation
- **Outils de pr√©cision (5 jours)** : +2 jours par prolongation
- **Dur√©e maximale totale** : 21 jours (emprunt initial + prolongations)

### Proc√©dure de Prolongation

#### Pour l'Utilisateur
1. Se connecter au site web
2. Aller dans "Mes emprunts en cours"
3. Cliquer sur "Prolonger" √† c√¥t√© de l'outil concern√©
4. Le syst√®me v√©rifie automatiquement l'√©ligibilit√©
5. Confirmation imm√©diate ou refus avec raison

#### Pour l'Administrateur (prolongation manuelle)
1. Acc√©der √† "Gestion des emprunts" ‚Üí "Emprunts en cours"
2. Rechercher l'emprunt concern√©
3. Cliquer sur "Actions" ‚Üí "Prolonger manuellement"
4. S√©lectionner la nouvelle date de retour
5. Ajouter une note justificative (obligatoire)
6. Valider

**Cas n√©cessitant une prolongation manuelle :**
- D√©passement du nombre maximum de prolongations
- Prolongation au-del√† de 21 jours
- Prolongation malgr√© une r√©servation (annulation de r√©servation)
- Cas exceptionnels valid√©s par un superviseur

### Gestion des Refus de Prolongation

**Raisons de refus automatique :**
1. **R√©servation en attente**
   - Message : "Cet outil est r√©serv√© par un autre utilisateur √† partir du [date]"
   - Action sugg√©r√©e : Retourner l'outil √† temps ou contacter l'administrateur

2. **Retard en cours**
   - Message : "Vous avez un ou plusieurs outils en retard. Veuillez les retourner avant de prolonger."
   - Action : Retourner les outils en retard

3. **Limite de prolongations atteinte**
   - Message : "Vous avez atteint le nombre maximum de prolongations (2) pour cet outil."
   - Action : Retourner l'outil et le r√©emprunter si disponible

4. **Dur√©e maximale d√©pass√©e**
   - Message : "La dur√©e totale d'emprunt ne peut exc√©der 21 jours."
   - Action : Retourner l'outil

5. **Demande tardive**
   - Message : "La date de retour est d√©pass√©e. Veuillez retourner l'outil d√®s que possible."
   - Action : Retourner imm√©diatement

**Notification des utilisateurs :**
- Email automatique en cas de refus
- Explication claire de la raison
- Alternatives propos√©es (autres outils similaires disponibles)

---

## ‚ö†Ô∏è Syst√®me de P√©nalit√©s pour Retard

### Niveaux de P√©nalit√©

#### Niveau 1 : Avertissement (1-2 jours de retard)
**Actions automatiques :**
- Email d'avertissement envoy√© quotidiennement
- SMS envoy√© apr√®s 2 jours (si num√©ro renseign√©)
- Rappel affich√© sur le compte utilisateur

**Cons√©quences :**
- Aucune restriction d'acc√®s
- Enregistrement dans l'historique
- Premier avertissement formel

**R√©solution :**
- Retourner l'outil d√®s que possible
- Aucune p√©nalit√© suppl√©mentaire si retour sous 2 jours

---

#### Niveau 2 : Suspension Temporaire (3-7 jours de retard)
**Actions automatiques :**
- Blocage des nouveaux emprunts
- Email et SMS quotidiens
- Notification √† l'administrateur

**Cons√©quences :**
- **Suspension de 3 jours** apr√®s le retour de l'outil
- Impossibilit√© d'emprunter pendant la suspension
- Les r√©servations futures sont annul√©es
- Comptabilisation dans le dossier utilisateur

**Calcul de la suspension :**
- D√©bute le jour du retour effectif de l'outil
- 72 heures pleines
- Pas de r√©duction possible (sauf cas exceptionnel valid√© par admin)

**Communication :**
- Email de suspension avec date de fin
- Rappel 24h avant la fin de suspension
- Email de r√©activation automatique

**R√©solution :**
- Retourner l'outil en retard
- Attendre la fin de la p√©riode de suspension
- Compte automatiquement r√©activ√©

---

#### Niveau 3 : Suspension Longue (8-14 jours de retard)
**Actions automatiques :**
- Blocage total du compte
- Notification √† l'administrateur et au superviseur
- Alerte de s√©curit√© (outil potentiellement perdu)
- Convocation automatique g√©n√©r√©e

**Cons√©quences :**
- **Suspension de 7 jours** apr√®s le retour
- **Rendez-vous obligatoire** avec l'administrateur
- V√©rification de l'√©tat de l'outil
- √âvaluation des dommages √©ventuels
- Peut entra√Æner des frais de r√©paration

**Proc√©dure de rendez-vous :**
1. L'utilisateur re√ßoit une convocation par email
2. Rendez-vous √† fixer dans les 5 jours ouvr√©s
3. Discussion sur les circonstances du retard
4. V√©rification de l'outil avec l'utilisateur pr√©sent
5. Compte-rendu √©crit et sign√© par les deux parties
6. D√©cision sur les suites √† donner

**R√©activation du compte :**
- N√©cessite validation manuelle par l'administrateur
- Possible seulement apr√®s le rendez-vous
- Peut inclure des conditions (ex: limitation temporaire du nombre d'emprunts)

---

#### Niveau 4 : Blocage Complet (Plus de 14 jours de retard)
**Actions automatiques :**
- **Blocage d√©finitif** du compte jusqu'√† r√©gularisation
- Notification au service de s√©curit√© du laboratoire
- Proc√©dure de perte/vol d√©clench√©e
- Facturation de l'outil si non retourn√© sous 30 jours

**Cons√©quences imm√©diates :**
- Acc√®s r√©voqu√© √† tous les services du laboratoire
- Impossibilit√© d'emprunter tout √©quipement
- Badge d√©sactiv√© pour la servante
- Signalement √† la direction

**Proc√©dure de r√©gularisation :**
1. **Si l'outil est retourn√© :**
   - Inspection compl√®te de l'√©tat
   - √âvaluation des dommages
   - Facturation si r√©parations n√©cessaires
   - Rendez-vous obligatoire avec le responsable du laboratoire
   - D√©cision sur la r√©activation du compte (peut √™tre refus√©e)

2. **Si l'outil n'est pas retourn√© :**
   - D√©claration de perte/vol
   - Facturation du prix de remplacement
   - Proc√©dure disciplinaire
   - Interdiction permanente possible

**Co√ªts factur√©s :**
- Prix de remplacement de l'outil
- Frais administratifs (50‚Ç¨)
- Frais de traitement du dossier (30‚Ç¨)
- Total d√©bit√© du compte de l'utilisateur ou de son d√©partement

**R√©activation √©ventuelle :**
- N√©cessite autorisation du responsable du laboratoire
- P√©riode probatoire de 6 mois
- Limitation stricte (1 outil √† la fois, dur√©e r√©duite)
- R√©vision apr√®s 6 mois de comportement exemplaire

---

### Circonstances Att√©nuantes

**Retards justifi√©s acceptables :**
Les p√©nalit√©s peuvent √™tre annul√©es ou r√©duites dans les cas suivants :

1. **Urgence m√©dicale**
   - Justificatif m√©dical obligatoire
   - Hospitalisation
   - Maladie grave

2. **Cas de force majeure**
   - Catastrophe naturelle
   - Gr√®ve des transports prolong√©e
   - Fermeture inattendue du laboratoire

3. **Probl√®mes techniques du syst√®me**
   - Panne de la servante emp√™chant le retour
   - Bug du syst√®me de retour
   - Dysfonctionnement technique av√©r√©

**Proc√©dure de contestation :**
1. Contacter l'administrateur sous 48h apr√®s r√©ception de la p√©nalit√©
2. Fournir les justificatifs n√©cessaires
3. L'administrateur examine le dossier sous 5 jours ouvr√©s
4. D√©cision communiqu√©e par email
5. Si accept√©e : annulation des p√©nalit√©s
6. Si refus√©e : possibilit√© d'appel aupr√®s du responsable du laboratoire

---

## üìß Syst√®me de Notifications

### Notifications Automatiques pour les Emprunts

#### Avant l'Emprunt
**R√©servation confirm√©e**
- Envoy√© imm√©diatement apr√®s la r√©servation
- Contenu : date/heure de retrait, nom de l'outil, instructions

**Rappel de r√©servation (J-1)**
- Envoy√© 24h avant l'heure de retrait pr√©vue
- Contenu : rappel de la r√©servation, localisation de la servante

**Annulation de r√©servation**
- Envoy√© si r√©servation annul√©e (par l'utilisateur ou automatiquement)
- Contenu : raison de l'annulation, alternatives possibles

#### Pendant l'Emprunt
**Confirmation d'emprunt**
- Envoy√© imm√©diatement apr√®s le retrait de l'outil
- Contenu : nom de l'outil, date de retour pr√©vue, dur√©e, conditions

**Rappel de retour (J-2)**
- Envoy√© 2 jours avant la date de retour
- Contenu : date de retour, proc√©dure de retour, option de prolongation

**Rappel de retour (J-1)**
- Envoy√© 24h avant la date de retour
- Contenu : dernier rappel, horaires d'ouverture, p√©nalit√©s en cas de retard

**Rappel de retour (Jour J)**
- Envoy√© le matin du jour de retour
- Contenu : date limite ce jour, urgence du retour

**Prolongation accept√©e**
- Envoy√© imm√©diatement apr√®s l'acceptation de la prolongation
- Contenu : nouvelle date de retour, nombre de prolongations restantes

**Prolongation refus√©e**
- Envoy√© imm√©diatement apr√®s le refus
- Contenu : raison du refus, alternatives

#### Apr√®s l'Emprunt
**Confirmation de retour**
- Envoy√© imm√©diatement apr√®s le d√©p√¥t de l'outil
- Contenu : remerciement, dur√©e totale d'emprunt, invitation √† noter l'exp√©rience

**Demande de signalement de probl√®me**
- Envoy√© 1h apr√®s le retour
- Contenu : invitation √† signaler tout probl√®me constat√© sur l'outil

#### Notifications de Retard
**Premier retard (Jour J+1)**
- Envoy√© √† 9h00
- Contenu : rappel urgent, cons√©quences du retard, contact administrateur

**Retard 2-3 jours (Quotidien)**
- Envoy√© √† 9h00 chaque jour
- Contenu : nombre de jours de retard, p√©nalit√©s encourues, urgence

**Retard 3-7 jours (Quotidien + SMS)**
- Envoy√© √† 9h00 (email) et 10h00 (SMS)
- Contenu : suspension imminente, derni√®re chance avant blocage

**Retard 8+ jours (Escalade)**
- Email + SMS quotidien
- Contenu : convocation, proc√©dure en cours, cons√©quences graves

---

### Notifications pour les Administrateurs

#### Alertes Syst√®me
**Outil non retourn√© (J+1)**
- Envoy√© √† 10h00
- Liste des outils en retard et des emprunteurs
- Actions sugg√©r√©es

**Outil en retard critique (J+7)**
- Envoy√© imm√©diatement
- D√©tails de l'emprunt, historique de l'utilisateur
- N√©cessite intervention

**Outil potentiellement perdu (J+14)**
- Alerte prioritaire
- D√©clenchement de la proc√©dure de perte
- Actions urgentes requises

#### Alertes Maintenance
**Outil signal√© d√©fectueux**
- Envoy√© imm√©diatement apr√®s signalement
- D√©tails du probl√®me, photos √©ventuelles
- Outil automatiquement en maintenance

**Maintenance planifi√©e √† effectuer**
- Envoy√© 7 jours avant la date pr√©vue
- Liste des outils concern√©s
- Pr√©paration n√©cessaire

**√âtalonnage √† pr√©voir**
- Envoy√© 30 jours avant expiration du certificat
- Outils de mesure concern√©s
- Planification n√©cessaire

#### Alertes Utilisateurs
**Utilisateur avec retards fr√©quents**
- Envoy√© mensuellement
- Liste des utilisateurs √† surveiller
- Historique des retards

**Demande de prolongation exceptionnelle**
- Envoy√© imm√©diatement
- D√©tails de la demande
- Validation manuelle requise

---

### Personnalisation des Notifications

#### Pour les Utilisateurs
**Param√®tres disponibles :**
- Activer/d√©sactiver les notifications email
- Activer/d√©sactiver les notifications SMS
- Choisir le d√©lai des rappels (1, 2 ou 3 jours avant)
- Recevoir un r√©sum√© hebdomadaire des emprunts

**Acc√®s aux param√®tres :**
1. Se connecter au site web
2. Aller dans "Mon compte" ‚Üí "Pr√©f√©rences de notification"
3. Modifier les param√®tres
4. Sauvegarder

**Note :** Les notifications critiques (retard, blocage) ne peuvent pas √™tre d√©sactiv√©es.

#### Pour les Administrateurs
**Param√®tres disponibles :**
- Choisir les types d'alertes √† recevoir
- D√©finir des seuils d'alerte personnalis√©s
- Programmer des rapports automatiques
- D√©l√©guer certaines notifications √† d'autres admins

---

## üìä Statistiques et Rapports d'Emprunt

### Tableaux de Bord Disponibles

#### Pour les Administrateurs
**Vue d'ensemble :**
- Nombre total d'emprunts actifs
- Nombre d'outils en retard
- Taux d'utilisation global
- Alertes en attente

**Rapports mensuels :**
- Nombre d'emprunts par outil
- Dur√©e moyenne d'emprunt
- Taux de retard par utilisateur
- Outils les plus demand√©s

**Rapports annuels :**
- √âvolution de l'utilisation
- Analyse des co√ªts (maintenance, pertes)
- Performance du syst√®me
- Recommandations d'achat

#### Pour les Utilisateurs
**Mon activit√© :**
- Emprunts en cours
- Historique des emprunts
- Outils favoris
- Statistiques personnelles

---

## üîÑ Workflow Complet d'un Emprunt

### Diagramme du Processus

```
[Utilisateur] ‚Üí [Connexion] ‚Üí [S√©lection outil]
                                    ‚Üì
                     [Outil disponible ?] ‚Üí Non ‚Üí [R√©servation possible ?]
                                    ‚Üì Oui                    ‚Üì
                         [Scan badge] ‚Üê ‚Üê  ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê Oui
                                    ‚Üì
                      [Ouverture compartiment]
                                    ‚Üì
                         [Retrait outil]
                                    ‚Üì
                     [Confirmation emprunt]
                                    ‚Üì
                    [Utilisation (max 21 jours)]
                                    ‚Üì
             [Prolongation ?] ‚Üí Oui ‚Üí [V√©rification conditions]
                    ‚Üì Non                         ‚Üì
              [Retour outil]  ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê 
                    ‚Üì
          [Scan badge + D√©p√¥t]
                    ‚Üì
         [V√©rification √©tat outil]
                    ‚Üì
      [Confirmation retour] ‚Üí [Fin]
```

### √âtapes D√©taill√©es

**1. R√©servation/Emprunt Direct**
- Dur√©e : 2-5 minutes
- Acteurs : Utilisateur, Syst√®me
- Validation automatique

**2. P√©riode d'Emprunt**
- Dur√©e : 5-21 jours selon outil
- Rappels automatiques
- Option de prolongation

**3. Retour**
- Dur√©e : 1-3 minutes
- V√©rification automatique
- Confirmation imm√©diate

**4. Traitement Post-Retour**
- V√©rification de l'√©tat (admin si signalement)
- Nettoyage si n√©cessaire
- Remise en service ou maintenance

---

## üÜò Gestion des Cas Exceptionnels

### Perte ou Vol d'un Outil

**Proc√©dure pour l'utilisateur :**
1. Signaler imm√©diatement (max 24h)
2. Remplir le formulaire de d√©claration
3. Fournir les circonstances d√©taill√©es
4. D√©poser une main courante si vol

**Proc√©dure administrative :**
1. Investigation sur les circonstances
2. √âvaluation de la responsabilit√©
3. D√©cision sur la facturation
4. Commande de remplacement

**Facturation :**
- Prix d'achat + frais administratifs
- Possibilit√© de prise en charge par l'assurance selon les cas
- √âchelonnement de paiement possible

### Outil Endommag√©

**Dommages mineurs (usure normale) :**
- Aucun frais
- Outil mis en maintenance
- Utilisateur non p√©nalis√©

**Dommages importants (n√©gligence) :**
- √âvaluation du co√ªt de r√©paration
- Facturation partielle ou totale
- Avertissement enregistr√©

**Dommages graves (mauvais usage volontaire) :**
- Facturation compl√®te
- Suspension du compte
- Possibilit√© de sanctions disciplinaires

### Extension d'Urgence de Dur√©e d'Emprunt

**Cas acceptables :**
- Probl√®me technique impr√©vu sur le projet
- Urgence acad√©mique (pr√©sentation, examen)
- Indisponibilit√© forc√©e (maladie courte)

**Proc√©dure :**
1. Contacter l'administrateur AVANT la date de retour
2. Expliquer la situation
3. Fournir des justificatifs si possible
4. Attendre la validation

**D√©cision de l'administrateur :**
- Analyse de l'historique de l'utilisateur
- V√©rification des r√©servations en attente
- Accord ou refus motiv√©
- Prolongation exceptionnelle possible jusqu'√† 7 jours suppl√©mentaires

---

## üì± Int√©gration Mobile et API

### Application Mobile (en d√©veloppement)
- Consultation en temps r√©el des disponibilit√©s
- R√©servation depuis le smartphone
- Notifications push
- Scan de QR code pour emprunt

### API pour Int√©grations
- API REST disponible pour les d√©veloppeurs
- Documentation compl√®te sur demande
- Webhooks pour √©v√©nements (emprunt, retour, retard)
- Int√©gration avec syst√®mes tiers (LDAP, SSO)
